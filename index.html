<!DOCTYPE html>
<html lang="nl">
<head>
  <meta charset="UTF-8">
  <title>Fietslease Simulator UZ Leuven</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: 'Segoe UI', sans-serif;
      background-color: #f0f4f8;
      color: #333;
      margin: 0;
      padding: 20px;
    }

    body.dark-mode {
      background-color: #1a1a1a;
      color: #e0e0e0;
    }

    .header {
      margin-bottom: 20px;
      text-align: center;
      position: relative;
    }

    .header h1 {
      font-size: 1.1em;
      color: #0078D7;
      margin: 0;
    }
    
    body.dark-mode .header h1 {
        color: #8cbbff;
    }

    #theme-toggle {
        position: fixed;
        top: 20px;
        right: 20px;
        font-size: 0.8em;
        background: none;
        border: 1px solid white;
        border-radius: 5px;
        cursor: pointer;
        color: white;
        padding: 5px 10px;
        display: flex;
        align-items: center;
        gap: 5px;
        z-index: 1000;
        /* Aangepast: vaste breedte om overlappen te voorkomen */
        width: 110px; 
        text-align: center;
    }
    
    body:not(.dark-mode) #theme-toggle {
        border: 1px solid #333;
        color: #333;
    }

    .subtext {
      font-size: 11px;
      color: #888;
      margin-top: 4px;
    }
    
    body.dark-mode .subtext {
        color: #a0a0a0;
    }

    .container {
      display: flex;
      gap: 40px;
      max-width: 1200px;
      margin: auto;
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 0 10px rgba(0,0,0,0.1);
    }
    
    body.dark-mode .container {
        background: #2b2b2b;
        box-shadow: 0 0 10px rgba(255,255,255,0.1);
    }

    .left-panel, .right-panel {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .left-panel {
      gap: 5px;
    }
    
    label {
      margin-top: 8px;
      font-weight: bold;
      font-size: 13px;
    }

    input, select {
      width: 100%;
      padding: 5px;
      margin-top: 2px;
      border-radius: 5px;
      border: 1px solid #ccc;
      font-size: 13px;
      background: #fdfdfd;
      color: #333;
    }
    
    body.dark-mode input, body.dark-mode select {
        background: #3a3a3a;
        color: #e0e0e0;
        border: 1px solid #555;
    }

    .right-panel {
      background-color: #e6f7ff;
      padding: 20px;
      border-radius: 10px;
      display: flex;
      flex-direction: column;
      align-items: center;
    }
    
    body.dark-mode .right-panel {
        background-color: #3a3a3a;
    }

    .top-link {
        width: 100%;
        text-align: center;
        margin-bottom: 5px;
    }

    .button-row {
      display: flex;
      justify-content: space-between;
      gap: 4%;
      margin-top: 10px;
    }

    button {
      padding: 8px;
      width: 48%;
      background: #0078D7;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
      font-size: 13px;
    }
    
    body.dark-mode button {
        background: #005fa3;
    }

    .link-button {
      display: inline-block;
      padding: 5px 10px;
      background-color: #28a745;
      color: white;
      text-decoration: none;
      border-radius: 5px;
      font-weight: bold;
      font-size: 12px;
      transition: background-color 0.3s ease;
      text-align: center;
    }

    .link-button:hover {
      background-color: #218838;
    }

    .result {
      background: #ffffff;
      padding: 15px;
      border-radius: 5px;
      margin-top: 10px;
      width: 100%;
      font-size: 14px;
      line-height: 1.2;
    }
    
    body.dark-mode .result {
        background: #4a4a4a;
        color: #e0e0e0;
    }

    .result strong {
        font-size: 1.1em;
    }
    
    .result br {
        line-height: 0.1;
    }

    .result em {
      font-size: 0.9em;
      line-height: 1.2;
    }

    .disclaimer {
      font-size: 0.7em;
      color: #555;
      margin-top: 10px;
      background-color: #f9f9f9;
      padding: 10px;
      border-left: 4px solid #a3c2f2;
      border-radius: 4px;
    }
    
    body.dark-mode .disclaimer {
        background-color: #333333;
        color: #b0b0b0;
        border-left: 4px solid #5c85d6;
    }
  </style>
</head>
<body onload="calculate();">

  <div class="header">
    <h1>🚲 Fietslease Simulator Eindejaarspremie (EJP) UZ Leuven</h1>
    <div class="subtext">
      Deze tool biedt een indicatieve berekening van het resterende netto bedrag van uw jaarlijkse eindejaarspremie (EJP)
    </div>
  </div>
  <button id="theme-toggle">🌙 Dark mode</button>

  <div class="container">
    <div class="left-panel">
      <label>Werkpercentage (%):</label>
      <input type="text" id="workPct" value="100">

      <label>Bruto eindejaarspremie (100%):<span class="subtext"> (zie loonfiche "oktober (2)")</span></label>
      <input type="text" id="bonus" value="3250">

      <label>Fietsprijs: <span class="subtext">(Incl BTW) (De basisprijs van de fiets met prestatie-verbeterende aanpassingen, zoals een betere accu of geavanceerdere remmen + eventuele administratiekosten en BEBAT)</span></label>
      <input type="text" id="bikePrice" value="7500">

      <label>Accessoiresprijs: <span class="subtext">(Incl BTW) (Extra onderdelen voor comfort, gemak of veiligheid, zoals een fietstas, helm, slot, spatlap, verlichting of extra service)</span></label>
      <input type="text" id="accessoryPrice" value="350">

      <label>Leasetermijn:</label>
      <select id="leaseTerm">
        <option value="36">36 maanden</option>
        <option value="48">48 maanden</option>
      </select>

      <div class="button-row">
        <button onclick="calculate()">Bereken</button>
        <button onclick="exportResult()">📤 Exporteren</button>
      </div>
    </div>

    <div class="right-panel">
      <div class="top-link">
          <a href="https://www.bit.ly/UZLeuven-Simulatietool" target="_blank" class="link-button">UZLeuven-Simulatietool berekening maximaal leasebudget</a>
      </div>
      <div class="result" id="result"></div>
      <div class="disclaimer">
        <strong>Disclaimer:</strong><br>
        Deze simulatietool is uitsluitend bedoeld als informatief hulpmiddel en werd niet ontwikkeld door UZ Leuven. De maker van deze tool aanvaardt geen enkele aansprakelijkheid voor de juistheid, volledigheid of gevolgen van de berekeningen. Raadpleeg steeds de officiële communicatie van UZ Leuven voor bindende en actuele informatie.
      </div>
    </div>
  </div>

  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const toggleButton = document.getElementById('theme-toggle');
      const body = document.body;

      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'light-mode') {
        body.classList.remove('dark-mode');
      } else {
        body.classList.add('dark-mode');
      }

      function updateToggleButton() {
        if (body.classList.contains('dark-mode')) {
          toggleButton.innerHTML = '🌙 Dark mode';
        } else {
          toggleButton.innerHTML = '☀️ Light mode';
        }
      }
      
      updateToggleButton();

      toggleButton.addEventListener('click', () => {
        body.classList.toggle('dark-mode');
        if (body.classList.contains('dark-mode')) {
          localStorage.setItem('theme', 'dark-mode');
        } else {
          localStorage.setItem('theme', 'light-mode');
        }
        updateToggleButton();
      });
    });

    function parseDecimal(value) {
      return parseFloat(value.replace(',', '.'));
    }

    function calculate() {
      const workPct = parseDecimal(document.getElementById('workPct').value) / 100;
      const bonus100 = parseDecimal(document.getElementById('bonus').value);
      const bikePrice = parseDecimal(document.getElementById('bikePrice').value);
      const accessoryPrice = parseDecimal(document.getElementById('accessoryPrice').value);
      const leaseTerm = parseInt(document.getElementById('leaseTerm').value);

      const totalPrice = bikePrice + accessoryPrice;
      const monthlyLease = totalPrice / leaseTerm;
      const monthlyLoonruil = monthlyLease * 0.75;
      const yearlyLoonruil = monthlyLoonruil * 12;

      const brutoPremie = bonus100 * workPct;
      const brutoOverschot = brutoPremie - yearlyLoonruil;
      const nettoOverschot = brutoOverschot * 0.4589;
      const totaalNettoOverschot = nettoOverschot * (leaseTerm / 12);

      const restwaardeFiets = bikePrice * 0.1501;
      const restwaardeAccessoires = accessoryPrice * 0.1501;

      let resultText = `<strong>Resultaat:</strong><br><br>`;
      resultText += `
        📆 <strong>Maandelijkse leasekost:</strong> €${monthlyLease.toFixed(2)}<br>
        💰 <strong>Bruto loonruil per maand:</strong> €${monthlyLoonruil.toFixed(2)}<br>
        💰 <strong>Bruto loonruil per jaar:</strong> €${yearlyLoonruil.toFixed(2)}<br>
        📊 <strong>Netto overschot EJP per jaar:</strong> €${nettoOverschot.toFixed(2)}<br>
        📊 <strong>Totaal netto overschot EJP na ${leaseTerm} maanden:</strong> €${totaalNettoOverschot.toFixed(2)}<br>
        🔚 <strong>Overnameprijs fiets na lease:</strong> €${restwaardeFiets.toFixed(2)}<br>
        🔚 <strong>Overnameprijs accessoires na lease:</strong> €${restwaardeAccessoires.toFixed(2)}<br><br>
        📌 <em>De maandelijkse leasekost wordt jaarlijks verrekend via uw eindejaarspremie. Er gaat dus maandelijks niets van uw nettoloon.</em>
      `;
      document.getElementById('result').innerHTML = resultText;
    }

    function exportResult() {
      const result = document.getElementById('result').innerText;
      const blob = new Blob([result], { type: 'text/plain;charset=utf-8' });
      const link = document.createElement('a');
      link.href = URL.createObjectURL(blob);
      link.download = 'fietslease_simulatie.txt';
      link.click();
    }
  </script>
</body>
</html>
